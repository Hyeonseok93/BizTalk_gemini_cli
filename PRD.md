# [Detailed PRD] Persona Switcher: Chameleon UI 기반 페르소나 몰입형 변환 솔루션

## 1. 프로젝트 개요 (Project Overview)
### 1.1 제품 비전
사용자가 단순한 텍스트 변환을 넘어, 특정 캐릭터의 세계관에 완전히 동화되는 '디지털 빙의(Digital Possession)' 경험을 제공한다. Groq API의 초고속 성능을 Chameleon UI의 시각적 전이 효과와 결합하여 기술적 우위와 감성적 몰입을 동시에 달성한다.

### 1.2 핵심 목표 (Core Objectives)
- **High-Accessibility Persona Immersion**: Groq 프리티어에서 넉넉한 사용 한도를 제공하는 효율적인 모델(예: Llama 3 8B)을 채택하여, 지연 시간 없는 초고속 응답과 높은 서비스 가용성 확보.
- **Prompt-Driven Depth**: 정교한 시스템 프롬프트 설계를 통해 모델의 효율성을 극대화하고, 각 페르소나의 독특한 말투와 세계관을 밀도 있게 구현.
- **Atmospheric Theme Swap**: 런타임 테마 전환 기술을 통해 공간의 분위기를 즉각적으로 반전시켜 사용자를 새로운 세계관으로 완전히 전이.

## 2. 타겟 사용자 분석 (Target Audience)
| 사용자 그룹 | 특징 | 주요 요구사항 |
| :--- | :--- | :--- |
| **MZ/알파 세대** | 숏폼 및 밈(Meme) 문화 익숙 | 빠른 반응 속도, 공유하고 싶은 개성 넘치는 변환 결과물 |
| **웹소설/웹툰 작가** | 캐릭터 어투의 반복적인 테스트 필요 | 안정적인 사용 환경과 다양한 인격 페르소나의 일관성 |
| **커뮤니티 유저** | 실시간 소통 중 페르소나 활용 선호 | 대기 시간 없는 즉각적인 변환 결과와 화려한 UI 효과 |

## 3. 상세 기능 요구사항 (Functional Requirements)

### 3.1 Chameleon UI 엔진 (Dynamic Theme Engine)
- **Theme Swap System**: 페르소나 선택 시 CSS Variables를 활용해 배경, 컬러, 폰트를 교체하여 공간의 무드를 즉시 변경.
- **Glitch Shader**: 테마 전환 시 차원 이동의 느낌을 주기 위한 디지털 노이즈 및 화면 왜곡 효과 적용.
- **Mask Selector UI**: 상단 중앙에 배치. 가면 아이콘을 통해 직관적으로 인격을 선택하며, 선택 시 해당 세계관의 시그니처 사운드 재생.

### 3.2 기능 요구사항 명세 (Requirement Specification)

| ID | 기능명 | 사용자 스토리 | 상세 요구사항 | 우선순위 |
| :--- | :--- | :--- | :--- | :---: |
| **FR-01** | **페르소나 선택 및 테마 전이** | 사용자로서, 상단의 가면 아이콘을 클릭하여 UI 전체를 해당 인격의 세계관으로 즉시 전환하고 싶다. | 1. 10종의 마스크 아이콘 제공 및 호버 시 시그니처 사운드 출력.<br>2. 선택 시 CSS Variables를 즉시 교체하여 배경, 컬러, 폰트 전이.<br>3. 테마 전환 시 Glitch 효과를 0.3초간 노출하여 '포털' 이동 효과 부여. | **Must** |
| **FR-02** | **고과몰입 말투 변환** | 사용자로서, 내가 입력한 일상 문장을 선택된 페르소나의 독특한 어투와 철학이 담긴 문장으로 변환하고 싶다. | 1. Groq API(Llama 3 8B)를 활용한 초고속 문장 변환.<br>2. 캐릭터별 고밀도 시스템 프롬프트를 적용하여 인격 빙의 수준의 결과물 도출.<br>3. 최대 500자까지의 한글/영문 텍스트 입력 지원. | **Must** |
| **FR-03** | **시그니처 애니메이션 출력** | 사용자로서, 변환된 결과가 단순히 텍스트로 뜨는 것이 아니라 캐릭터의 특징을 살린 효과와 함께 나타나길 원한다. | 1. 변환 텍스트 출력 시 선비는 '붓글씨', 마피아는 '타자기' 등 전용 효과 적용.<br>2. 결과창 배경에 캐릭터별 전용 Canvas 이펙트(비, 불꽃, 파티클 등) 실시간 렌더링. | **Must** |
| **FR-04** | **결과물 복사 및 공유** | 사용자로서, 변환된 인격의 말투를 메신저에 바로 사용하거나 화려한 테마가 적용된 카드로 저장하고 싶다. | 1. 변환 결과 텍스트의 '클립보드 복사' 기능 및 피드백 제공.<br>2. 현재 테마와 결과 텍스트가 합성된 '소셜 공유 카드(PNG)' 다운로드 기능 제공. | **Must** |
| **FR-05** | **입력 편의성 및 피드백** | 사용자로서, 입력 중인 글자 수를 확인하고 시스템이 처리 중임을 시각적으로 인지하고 싶다. | 1. 입력창 하단에 실시간 글자 수 카운터(`현재/500`) 표시.<br>2. AI 변환 중 '차원 이동 중...'과 같은 컨셉에 맞는 로딩 애니메이션 노출. | **Should** |
| **FR-06** | **차원 통신 오류 처리** | 사용자로서, API 장애 발생 시 세계관을 해치지 않는 방식으로 안내받고 재시도하고 싶다. | 1. 오류 시 "차원 통신 불안정" 등 컨셉 기반 에러 메시지 표시.<br>2. 재시도 버튼을 통해 기존 입력을 다시 요청할 수 있는 기능 제공. | **Should** |

### 3.3 페르소나 상세 정의 (변환 페르소나)
본 서비스는 사용자가 빙의할 인격을 아래와 같이 정의하고, 각 세계관의 특징을 극대화한 결과물을 제공합니다.

*   **조선 선비 (P01):**
    *   **특징:** 엄격한 유교적 예절과 도리를 중시하며, 학구적이고 우아한 태도를 지님.
    *   **결과물 톤앤매너:** 고풍스러운 어조(하오체/하십시오체). 사자성어와 수사구가 섞인 정중하고 깊이 있는 말투.
*   **느와르 마피아 (P02):**
    *   **특징:** 어두운 뒷골목의 긴장감, 힘의 논리, 냉혹한 현실주의를 바탕으로 함.
    *   **결과물 톤앤매너:** 짧고 묵직한 단문 위주의 어투. 비정하고 냉소적인 느와르 영화 대사 스타일.
*   **고대 철학자 (P03):**
    *   **특징:** 만물의 근원과 진리를 탐구하며, 끊임없는 질문을 통해 로고스를 실현하려 함.
    *   **결과물 톤앤매너:** 명상적이고 논리적인 어법. 본질을 꿰뚫는 질문을 던지는 소크라테스식 대화법.
*   **서부 보안관 (P04):**
    *   **특징:** 황야의 정의와 법 집행, 거친 생명력과 고독한 카리스마를 상징함.
    *   **결일물 톤앤매너:** 투박하지만 단호한 어조. 서부 영화 속 주인공 같은 묵직하고 남성적인 말투.
*   **영국 탐정 (P05):**
    *   **특징:** 예리한 관찰력과 치밀한 추리, 차가울 정도로 냉철한 이성을 지님.
    *   **결과물 톤앤매너:** 격식 있는 영국식 존댓말. 논리적 근거로 상대를 압도하는 지적이고 세련된 어조.
*   **츤데레 교수 (P06):**
    *   **특징:** 겉으로는 까칠하고 엄격하게 대하지만, 속으로는 상대를 아끼는 반전 매력을 지님.
    *   **결과물 톤앤매너:** 핀잔을 주는 듯한 말투 뒤에 따뜻한 조언이나 챙김이 숨겨진 츤데레 스타일.
*   **까칠한 드래곤 (P07):**
    *   **특징:** 초월적 존재로서의 오만함과 압도적인 위엄, 인간을 하찮게 여기는 고압적인 태도.
    *   **결과물 톤앤매너:** '짐' 또는 '필멸자'와 같은 단어를 사용하는 위엄 있고 권위적인 신화적 어조.
*   **욕쟁이 할머니 (P08):**
    *   **특징:** 거친 욕설 속에 담긴 깊은 정과 푸근한 인심, 삶의 애환이 녹아든 지혜를 전함.
    *   **결과물 톤앤매너:** 구수한 사투리와 욕설이 섞여 있지만, 결국 상대를 걱정하고 챙겨주는 정겨운 말투.
*   **군대 조교 (P09):**
    *   **특징:** 빈틈없는 절도와 규율, 상대를 압박하는 강력한 에너지와 카리스마를 발산함.
    *   **결과물 톤앤매너:** 딱딱 끊어지는 다나까체. 호통치는 듯한 강력한 명령조와 기선 제압용 어법.
*   **긍정 리포터 (P10):**
    *   **특징:** 세상을 밝게 보는 초긍정 마인드, 모든 상황에서 희망과 즐거움을 찾아내는 에너지.
    *   **결과물 톤앤매너:** 높은 텐션과 감탄사가 섞인 경쾌한 말투. 모든 일을 '럭키비키'하게 해석하는 긍정 어법.

### 3.4 출력 시스템 (Visual Manifestation)
- **Dual View Layout**: 
  - **Left (Normal)**: 샌드박스형 입력창. 타이핑 시 미세한 입자 효과.
  - **Right (Persona)**: 테마별 전용 컨테이너. (예: 마피아 테마 시 빗물 흐르는 오버레이 레이어 활성화).
- **Social Card Generator**: HTML2Canvas 라이브러리를 사용하여 변환 결과물을 테마 배경과 함께 PNG로 렌더링.

## 4. 페르소나 상세 사양 (Persona Specifications - 10종)

| ID | 페르소나 | 폰트 스타일 | 메인 컬러/텍스처 | 전용 캔버스 이펙트 |
| :--- | :--- | :--- | :--- | :--- |
| P01 | **조선 선비** | 나눔명조 옛한글 | #F4F1DE (한지 질감) | 수묵화 먹번짐 (Ink Splatter) |
| P02 | **느와르 마피아** | Courier Prime | #1A1A1A (거친 노이즈) | 화면을 가르는 빗줄기 (Rainfall) |
| P03 | **고대 철학자** | Cinzel / 바탕 | #EAE2B7 (대리석 광택) | 흩날리는 모래바람 (Sand Dust) |
| P04 | **서부 보안관** | Rye / 산세리프 | #BC6C25 (거친 가죽) | 화면 중앙 총탄 구멍 (Bullet Hole) |
| P05 | **영국 탐정** | Playfair Display | #2B2D42 (안개 낀 거리) | 돋보기 왜곡 (Magnifier Lens) |
| P06 | **츤데레 교수** | 나눔고딕 | #8D99AE (낡은 종이) | 안경 김 서림/닦임 (Steam) |
| P07 | **까칠한 드래곤** | Metal Mania | #6A040F (용암/비늘) | 화면 하단 화염 (Fire Particle) |
| P08 | **욕쟁이 할머니** | 배달의민족 주아 | #FFB703 (시골 장판) | 모락모락 김 (Steam/Heat) |
| P09 | **군대 조교** | Black Han Sans | #283618 (국방색/위장) | 화면 진동 (Screen Shake) |
| P10 | **긍정 리포터** | 둥근모꼴 | #FF006E (무지개/네온) | 팡파르 꽃가루 (Confetti) |

## 5. 화면 디자인 및 스타일 가이드 (UI/UX Design & Style Guide)

### 5.1. 디자인 원칙
- **몰입성 (Immersive)**: 가면을 선택하는 순간 색감, 폰트, 이펙트가 완전히 교체되어 사용자가 새로운 세계관에 들어온 듯한 '시각적 빙의' 경험을 제공합니다.
- **역동성 (Dynamic)**: 정적인 페이지를 넘어 글리치 효과, Canvas 애니메이션, 시그니처 사운드를 통해 살아있는 듯한 인터랙티브 환경을 구축합니다.
- **직관성 (Intuitive)**: 별도의 설명 없이도 '가면 선택 → 문장 입력 → 변환'의 흐름을 즉시 이해할 수 있는 간결한 인터페이스를 유지합니다.

### 5.2. 레이아웃
- **Dual Panel Vision (데스크톱)**: 화면을 좌우로 분할하여 좌측은 '일상의 나(입력)', 우측은 '변신한 인격(결과)'을 배치합니다. 우측 패널은 선택된 페르소나에 따라 배경과 레이아웃이 실시간으로 스왑됩니다.
- **Responsive Stack (모바일/태블릿)**: 너비 768px 이하에서는 상하 스택 구조로 자동 전환되며, 모바일 전용 자이로 센서 반응형 배경을 적용하여 몰입감을 유지합니다.

### 5.3. 기본 색상 및 테마 엔진 (Color & DTE)
- **Base UI Color**: `#121212` (깊은 몰입을 위한 다크 테마 기본), `#4A90E2` (포털 활성화 블루)
- **Dynamic Override**: 페르소나 선택 시 CSS Variables를 통해 해당 캐릭터의 시그니처 컬러로 전체 무드가 전환됩니다. (예: 선비-한지색, 마피아-느와르 블랙, 드래곤-볼케이노 레드)
- **Accent & Feedback**:
  - `Success/Copy`: `#50E3C2` (복사 성공 시 네온 그린 피드백)
  - `Error/Glitch`: `#FF0055` (통신 오류 시 마젠타 핑크 글리치 효과)

### 5.4. 타이포그래피
- **System Font**: `Pretendard`, `sans-serif` (기능 조작 및 입력용 가독성 폰트)
- **Persona Display Font**: 각 페르소나의 개성을 반영한 전용 폰트 적용 (나눔명조 옛한글, Courier Prime, Black Han Sans, 둥근모꼴 등)

### 5.5. 핵심 컴포넌트 스타일
- **Interactive Mask Selector**: 화면 상단 중앙 배치. 가면 아이콘 호버 시 3D 회전 및 캐릭터 테마색 발광 효과(Box-shadow glow)를 제공합니다.
- **The Portal (Input Box)**: 미니멀한 유리 질감(Glassmorphism) 스타일. 타이핑 시 미세한 입자 효과가 발생합니다.
- **Visual Manifestation Card (Output Area)**: 캐릭터별 전용 배경 텍스처와 실시간 Canvas 이펙트가 결합된 카드 UI. 복사 및 이미지 저장 버튼은 테마에 어우러지는 아이콘 스타일로 제공됩니다.

## 6. 프로젝트 구조 (Project Structure)

```text
/
├── server/                 # Flask 백엔드 서버
│   ├── app.py              # 메인 API 엔드포인트 및 Groq 연동
│   ├── persona_manager.py  # 10종 페르소나 시스템 프롬프트 및 메타데이터 관리
│   ├── requirements.txt    # 의존성 패키지 목록
│   └── .env                # Groq API 키 및 환경 변수
├── client/                 # 프론트엔드 (Static Files)
│   ├── index.html          # 메인 UI 레이아웃
│   ├── assets/             # 공통 에셋 (가면 아이콘, 효과음, 폰트)
│   ├── css/
│   │   ├── themes.css      # CSS Variables 기반 테마 정의
│   │   └── animations.css  # 글리치 및 캐릭터별 특화 애니메이션
│   └── js/
│       ├── theme-engine.js # Dynamic Theme Engine (DTE) 로직
│       ├── api-client.js   # 백엔드 통신 및 데이터 처리
│       └── renderer.js     # Canvas API 기반 이펙트 렌더링
└── docs/
    ├── PRD.md              # 제품 요구사항 정의서
    └── 프로그램개요서.md      # 초기 프로그램 개요서
```

## 7. 기술 사양 (Technical Specifications)
- **Frontend**: 
  - Framework: Vanilla JS (Performance 최우선)
  - Animation: GSAP (Complex transitions), Web Animations API
  - Graphics: HTML5 Canvas API
- **Backend**: 
  - Framework: Python Flask (Asynchronous handling)
  - Security: Flask-Limiter (IP당 1분 10회 요청 제한)
- **API Endpoints**:
  - `GET /api/v1/personas`: 10종 페르소나 메타데이터 반환.
  - `POST /api/v1/transform`: `{persona_id, text}` 입력 시 변환 결과 및 이펙트 정보 반환.

## 8. 비기능 요구사항 (Non-Functional Requirements)

| ID | 구분 | 요구사항 |
|---|---|---|
| **NFR-01** | **성능 (Performance)** | - 페이지 로딩 시간: 2초 이내 (First Contentful Paint < 1.2s)<br>- 변환 요청 응답 시간: 평균 3초, 최대 5초를 넘지 않아야 함.<br>- 테마 전환 시 프레임 드랍 10% 미만 유지 |
| **NFR-02** | **사용성 및 호환성 (Usability & Compatibility)** | - 반응형 웹 디자인을 적용하여 데스크톱, 태블릿, 모바일 기기에서 최적화된 UI/UX 제공<br>- Chrome, Safari, Edge 최신 버전 지원<br>- WCAG 2.1 AA 수준 준수 (예: 키보드 네비게이션, ARIA 속성 부여, 고대비 모드 지원) |
| **NFR-03** | **보안 (Security)** | - Groq AI API 키 등 모든 민감 정보는 환경 변수로 관리하며, 클라이언트 사이드에 노출되지 않아야 함. |
| **NFR-04** | **안정성 및 확장성 (Reliability & Scalability)** | - 서비스 가용성 99.5% 이상 목표<br>- 페르소나 추가 시 `persona_manager.py`에 설정값만 추가하면 자동으로 UI에 반영되는 플러그인 구조 |

## 9. 릴리즈 계획 (Release Plan)

### 1단계: 환경 설정 및 AI 파이프라인 구축 (완료 목표: Sprint 1)
- **주요 내용**:
  - Flask 백엔드 서버 기본 구조 및 API 엔드포인트(`personas`, `transform`) 설계.
  - Groq API(Llama 3 8B) 연동 및 10종 페르소나별 고밀도 시스템 프롬프트 엔지니어링 완성.
  - 프론트엔드 프로젝트 스캐폴딩 및 CSS Variable 기반 테마 시스템 초기 설계.

### 2단계: Chameleon UI 및 테마 엔진 개발 (완료 목표: Sprint 2)
- **주요 내용**:
  - Dynamic Theme Engine(DTE) 구현 및 10종 페르소나 시그니처 컬러/폰트 정의.
  - Interactive Mask Selector 개발 (호버 시 3D 회전 효과 및 사운드 통합).
  - Glitch Portal 전환 애니메이션 및 Dual Panel 반응형 레이아웃 구축.

### 3단계: 시각적 구체화 및 몰입 요소 구현 (완료 목표: Sprint 3)
- **주요 내용**:
  - 캐릭터별 전용 Canvas 이펙트(Ink Splatter, Rain, Fire 등) 10종 개발 및 최적화.
  - 페르소나별 특화 출력 애니메이션(붓글씨, 타자기 등) 및 상황별 효과음 적용.
  - 소셜 공유용 카드 생성기(PNG export) 기능 구현.

### 4단계: 통합, 최적화 및 최종 배포 (완료 목표: Sprint 4)
- **주요 내용**:
  - 전 기능 통합 테스트 및 '차원 통신 오류' 등 예외 처리 로직 보강.
  - Vercel Edge Network 배포 파이프라인 구축 및 환경 변수 설정.
  - 성능 최적화(FCP < 1.2s 달성) 및 10종 페르소나 빙의 경험 최종 검수.