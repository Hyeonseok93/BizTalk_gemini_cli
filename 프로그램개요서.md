# 페르소나 과몰입 변환 프로그램

## 1. 프로젝트 개요
- **프로젝트 명**: Persona Switcher - Chameleon UI 기반 페르소나 몰입형 변환 솔루션
- **개발 배경 및 필요성**:
  - 단순 텍스트 변환을 넘어, 특정 캐릭터의 세계관에 완전히 동화되는 '디지털 빙의' 경험에 대한 유저 니즈 증가
  - Groq API의 초고속 처리 성능을 단순 텍스트가 아닌 화려한 시각적 피드백으로 승화시킬 차세대 인터페이스 필요
- **주요 목표**:
  1. 사용자가 선택한 페르소나에 맞춰 UI 전체가 즉각적으로 전이되는 'Chameleon UI' 구현
  2. Groq API를 활용해 각 페르소나의 독특한 말투와 세계관을 반영한 초고속 문장 변환
  3. 글리치 효과, 애니메이션 등을 통해 단순 도구가 아닌 '포털'을 통과하는 듯한 UX 선사
  4. 런타임 테마 스왑 기술을 통한 압도적인 시각적 대비 효과 제공
- **목표 사용자**:
  - 일상적인 소통에 지루함을 느끼고 개성 있는 표현을 원하는 MZ/알파 세대
  - 캐릭터 설정이나 창작 활동에서 특정 어투의 영감이 필요한 크리에이터
  - 딱딱한 업무 환경 속에서도 유머러스하고 파격적인 반전 매력을 추구하는 유저
  - 고성능 AI 응답과 화려한 인터랙션의 결합을 경험하고자 하는 테크 얼리어답터

## 2. 주요 기능
### 2.1 핵심 기능
- **Dynamic Theme Engine (DTE)**: 페르소나 선택 시 CSS 변수(Variables)를 즉시 교체하여 배경, 컬러, 폰트를 0.1초 내 스왑
- **Glitch Portal Transition**: 테마 전환 시 화면 전체에 디지털 노이즈 및 애니메이션을 적용하여 공간 전이 효과 연출
- **Persona-Specific Animation**: AI 응답 시 선비는 '붓글씨', 마피아는 '타자기', 요정은 '파티클' 등 캐릭터별 전용 출력 효과 적용
- **Groq-Speed Feedback**: 초당 수백 토큰을 생성하는 Groq API를 통해 대기 시간 없는 실시간 인격 전환 경험 제공
- **Interactive Mask Selector**: 단순 드롭다운이 아닌, 입체적인 '가면' 아이콘을 통한 직관적이고 감각적인 페르소나 선택

### 2.2 사용자 시나리오
1. **조선 선비 테마로의 전이 시나리오**
   - 상황: 친구에게 약속 시간에 늦는다는 메시지를 보내야 함
   - 액션: '선비 가면' 선택 → 화면이 즉시 한지 질감과 수묵화 배경으로 변환되며 가야금 BGM 출력
   - 해결: "미안, 좀 늦을 것 같아" 입력 → "소생, 부득이한 사정으로 당도하는 시간이 지체될 듯하오니 부디 혜량하여 주시옵소서."로 변환
2. **느와르 마피아 테마로의 전이 시나리오**
   - 상황: 팀원에게 빠른 업무 피드백을 요청해야 함
   - 액션: '마피아 가면' 선택 → 화면에 빗줄기가 흐르고 흑백 대비 테마로 전환되며 거친 타자기 소리 활성화
   - 해결: "자료 빨리 보내줘" 입력 → "비가 내리는군. 이 바닥에서 약속은 목숨이지. 그 물건(자료), 내 손에 빨리 들어올수록 서로에게 좋을 거야."로 변환
3. **고대 그리스 철학자 테마로의 전이 시나리오**
   - 상황: 점심 메뉴를 고르지 못해 고민하는 상황
   - 액션: '아고라 가면' 선택 → 화면이 대리석 기둥과 푸른 지중해 테마로 변하며 산들바람 소리 출력
   - 해결: "오늘 뭐 먹지?" 입력 → "인간의 본질적 허기를 채우는 행위란 무엇인가. 오늘의 식사는 단순한 포만이 아닌, 영혼을 살찌우는 로고스의 탐구여야 하느니라."로 변환
4. **서부 개척시대 보안관 테마로의 전이 시나리오**
   - 상황: 무단횡단하는 사람을 발견했을 때
   - 액션: '스타 가면' 선택 → 화면이 모래 먼지 날리는 황야로 변하며 리볼버 장전음 출력
   - 해결: "길 건널 땐 조심하세요" 입력 → "이봐 낯선 이여, 이 마을의 법은 총알보다 빠르지. 목숨이 아깝다면 발밑을 조심하는 게 좋을 거야. 내 눈은 속이지 못하니까."로 변환
5. **영국 빅토리아 시대 탐정 테마로의 전이 시나리오**
   - 상황: 잃어버린 열쇠를 찾고 싶을 때
   - 액션: '돋보기 가면' 선택 → 화면이 안개 낀 런던 거리로 변하며 구슬픈 바이올린 선율 출력
   - 해결: "내 열쇠 어디 있지?" 입력 → "관찰하게, 친구여. 열쇠의 부재는 결코 우연이 아니네. 바닥에 떨어진 미세한 흙먼지와 자네의 흐트러진 소매가 이미 정답을 말해주고 있군."로 변환
6. **츤데레 대학교수님 테마로의 전이 시나리오**
   - 상황: 학생이 과제 질문을 하러 연구실에 방문했을 때
   - 액션: '안경 가면' 선택 → 화면이 낡은 책이 가득한 연구실로 변하며 깊은 한숨 소리 출력
   - 해결: "교수님 질문 있어요" 입력 → "바빠 죽겠는데 꼭 지금이어야 했나? ...뭐, 거기 앉아봐. 모르는 건 죄가 아니지만, 두 번은 설명 안 할 테니 이번에 제대로 배워가도록."로 변환
7. **까칠한 드래곤 테마로의 전이 시나리오**
   - 상황: 누군가 자신의 보물(간식)을 탐낼 때
   - 액션: '용 비늘 가면' 선택 → 화면이 용암이 흐르는 동굴로 변하며 거대한 날갯짓 소리 출력
   - 해결: "그거 내 거야 먹지 마" 입력 → "필멸자여, 감히 짐의 보물에 그 천박한 손을 대려 하느냐? 네 영혼이 한 줌의 잿더미가 되기 전에 당장 그 가느다란 손을 거두어라."로 변환
8. **동네 욕쟁이 할머니 테마로의 전이 시나리오**
   - 상황: 건강 챙기라는 안부 인사를 할 때
   - 액션: '꽃무늬 가면' 선택 → 화면이 시골 평상 배경으로 변하며 구수한 된장찌개 김이 모락모락 피어오름
   - 해결: "밥 잘 챙겨 먹어" 입력 → "이 문둥아! 기운 없어 보이길래 하는 소리여. 밥알이 목구멍으로 넘어가야 사람 구실을 하지, 어여 처먹어! 안 먹으면 몽둥이 찜질이여!"로 변환
9. **군대 조교 테마로의 전이 시나리오**
   - 상황: 아침 운동을 시작할 때
   - 액션: '빨간 모자 가면' 선택 → 화면이 삭막한 연병장으로 변하며 날카로운 호루라기 소리 출력
   - 해결: "이제 운동 시작합시다" 입력 → "전원 주목! 지금부터 지옥의 체력 단련을 실시한다! 동작 봐라? 너희의 나약함은 오직 정신력으로 극복한다! 교관의 구령에 맞춰 실시!"로 변환
10. **초긍정 아침방송 리포터 테마로의 전이 시나리오**
   - 상황: 비가 오는 날씨를 전할 때
   - 액션: '마이크 가면' 선택 → 화면이 무지개와 꽃가루로 가득 차며 경쾌한 팡파르 출력
   - 해결: "비가 와서 우울하네요" 입력 → "와아~! 여러분! 하늘에서 축복의 비가 내려요! 대지를 적시는 이 아름다운 빗소리, 정말 판타스틱하지 않나요? 우울함은 던져버리고 럭키비키하게 즐겨봐요!"로 변환

## 3. 시스템 아키텍처
### 3.1 기술 스택
#### 프론트엔드
- **HTML5 & Canvas API**: 시맨틱 마크업 및 마피아/요정 테마의 실시간 이펙트(비, 파티클) 렌더링
- **CSS3 (Variables & Animation)**: 런타임 테마 스왑을 위한 CSS 변수 제어 및 페르소나별 전용 애니메이션 구현
- **JavaScript (ES6+)**: 테마 엔진 로직 제어, Web Animations API를 활용한 글리치 효과 구현

#### 백엔드
- **Python 3.11 & Flask 2.3.x**: 페르소나별 시스템 프롬프트 및 UI 메타데이터(컬러, 이모지 코드)를 서빙하는 API 서버
- **Flask-CORS**: 크로스 오리진 요청 처리 및 보안 설정
- **python-dotenv**: Groq API 키 및 환경 변수 보안 관리

#### AI/ML 통합
- **Groq AI API**: Llama 3 기반의 초고속 추론 엔진을 통한 페르소나별 자연어 변환 처리

#### 배포 환경
- **Git & Vercel**: 소스 코드 버전 관리 및 Vercel Edge Network를 통한 정적 리소스 및 API 최적화 배포

### 3.2 시스템 구성도
```
사용자 브라우저 (Chameleon UI)
↓
[Dynamic Theme Engine] ← (Theme Metadata)
↓ (HTTP POST / Persona ID)
[Flask Backend API]
↓ (System Prompt Injection)
[Groq AI API Service]
↓
[Persona-Applied Text & Animation Trigger]
```
**구성 요소 설명**:
1. **클라이언트 레이어**: 페르소나별 시각적 마스크를 입힌 고사양 인터페이스 제공
2. **Theme 엔진**: 자바스크립트로 CSS Root 변수를 실시간 조작하여 화면 전체 무드 스왑
3. **AI 처리 레이어**: Groq API를 통해 페르소나의 '영혼'이 담긴 말투 생성
4. **메타데이터 게이트웨이**: 변환된 텍스트와 함께 출력 애니메이션 정보를 함께 패키징하여 반환

### 3.3 데이터 흐름
1. **페르소나 선택**: 사용자가 가면 아이콘 클릭 시 해당 페르소나의 ID와 UI 메타데이터 로드
2. **UI 전이**: 프론트엔드에서 즉각적으로 CSS 변수를 교체하여 테마 및 폰트 변경
3. **입력 및 요청**: 사용자가 변환할 문장을 입력하면 페르소나 ID와 함께 Flask로 전송
4. **프롬프트 구성**: 백엔드에서 해당 페르소나의 고유 세계관이 담긴 시스템 프롬프트와 사용자 입력 결합
5. **AI 추론**: Groq API가 0.5초 이내에 캐릭터에 빙의된 결과 문장 생성
6. **응답 및 렌더링**: 변환된 텍스트와 전용 이모지, 애니메이션 트리거를 클라이언트에 반환하여 시각적 현출

## 4. 상세 기능 설명
### 4.1 입력 인터페이스 (The Portal)
- **Interactive Mask Selector**: 화면 상단에 9종의 가문 아이콘 배치, 호버 시 각 페르소나의 시그니처 사운드 출력
- **Glitch Input Box**: 텍스트 입력 시 사이버펑크나 과학자 테마에서 실시간으로 글자가 지지직거리는 효과 적용
- **Persona Indicator**: 현재 어떤 인격에 빙의되어 있는지 상단에 화려한 네온사인이나 붓글씨로 표시
- **실시간 글자 수 제한**: 최대 500자 제한, 각 테마별 디자인에 녹아든 인디케이터 제공

### 4.2 말투 변환 엔진 (Soul Processor)
- **Groq API Multi-Prompting**: 9종 페르소나별 극단적으로 최적화된 시스템 프롬프트 설계
  - 선비: "너는 18세기 조선의 엄격한 선비다. 모든 말을 고풍스러운 어조로 바꿔라..."
  - 알파세대: "너는 유행어에 민감한 10대다. 키치하고 줄임말이 섞인 말투로 바꿔라..."
- **Metadata Packaging**: 단순 텍스트가 아닌, 결과창에 띄울 효과음 파일 경로와 애니메이션 타입을 JSON에 포함
- **Error Handling**: API 통신 중단 시 '차원 간 통신 오류'와 같은 컨셉에 맞는 에러 메시지 출력

### 4.3 출력 인터페이스 (Visual Manifestation)
- **Dual Panel Vision**: 좌측(일상의 나) / 우측(변신한 인격)을 극명한 시각적 대비로 레이아웃 배치
- **Signature Animations**: 응답 출력 시 캐릭터별 특수 효과(연기 피어오름, 번개 침, 꽃가루 날림 등) 트리거
- **Social Share Card**: 변환된 결과물을 각 페르소나 테마가 적용된 이미지 카드로 내려받아 공유할 수 있는 기능
- **Responsive Immersion**: 모바일 기기에서도 자이로 센서를 활용해 화면 기울기에 따라 배경 패턴이 움직이는 몰입형 디자인

## 5. 개발 및 배포 계획
### 5.1 개발 단계
1. **1단계: Chameleon UI 엔진 개발**
   - CSS 변수 기반 테마 스왑 로직 완성 및 9종 페르소나 가이드라인 확정
   - 테마 전환 시 Glitch 애니메이션 프레임워크 구축
2. **2단계: Flask & Groq 파이프라인 구축**
   - Flask 비동기 서버 설계 및 Groq API 연동 최적화
   - 9종 페르소나별 시스템 프롬프트 엔지니어링 및 테스트
3. **3단계: 페르소나별 특화 애니메이션 구현**
   - Canvas API 및 Web Animations API를 활용한 캐릭터별 고유 출력 효과 개발
   - 테마별 폰트 및 그래픽 에셋(수묵화, 네온, 픽셀아트 등) 최적화 로딩
4. **4단계: 통합 테스트 및 비주얼 디버깅**
   - 저사양 기기에서의 애니메이션 퍼포먼스 최적화 및 레이턴시 점검
   - 페르소나별 말투의 일관성 및 세계관 몰입도 검증
5. **5단계: Vercel 배포 및 엣지 최적화**
   - 전역 CDN을 통한 고용량 에셋 서빙 속도 개선 및 환경 변수 보안 설정

### 5.2 배포 전략
- **Git Flow & Code Review**: 'Masterpiece' 브랜치 전략을 통해 각 테마별 기능 구현 시 엄격한 비주얼 리뷰 진행
- **CI/CD Automation**: Vercel 연동을 통한 자동 배포 및 각 페르소나별 프리뷰 환경 구축
- **Environment Management**: Groq API Key 및 테마별 메타데이터 서버 정보를 Vercel 환경 변수로 엄격히 분리 관리
- **Performance Monitoring**: 유저가 가장 선호하는 페르소나 및 변환 속도 데이터를 분석하여 엔진 고도화